<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>
    <link href="/css/tailwind.css" rel="stylesheet">
    <link href="/style.css" rel="stylesheet" />
    <link href="/css/index.css" rel="stylesheet">
    <script src="/aejsFunction/ejsFunction.js"> </script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Trumbowyg/2.26.0/ui/trumbowyg.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Trumbowyg/2.26.0/trumbowyg.min.js"></script>

</head>

<body>

    <div>
        <div style="display: flex; box-sizing: border-box; ">

            <div
                style=" width: 20%; position: fixed; height: 100vh; display: flex; flex-direction: column; border-left: 0px; border-bottom: 0px; border-top: 0px; border-right: 1px; border-color: #1AAEF4; border-style: solid;">

                <figure style=" margin-left: 60px; margin-top: 20px; width: 180px; height: 70px; "
                    class=" w-[100%] border-b-2 border-solid border-red-700">
                    <img src="/It_training_logo.svg" style="width: 100%; height: auto;" />
                </figure>



                <div
                    style=" width: 100%; display: flex; flex-direction: column; gap: 30px; margin-left: 80px; margin-top: 20px;  ">
                    <div>
                        <a href="/admin/dashboard">
                            <button
                                style="cursor: pointer; border: none; padding: 7px 0px; width: 120px; border-radius: 5px; font-size: 16px; font-weight: 700; "
                                class="sidebarHomebButton" for="home"> Home </button>
                        </a>

                    </div>
                    <div>
                        <a href="/admin/course" onclick="this.classList.add('visited-active')">
                            <button
                                style=" cursor: pointer; border: none; padding: 7px 0px; width: 120px; border-radius:5px; font-size: 16px; font-weight: 700; "
                                class="sidebarHomebButton" for="course">Courses </button>
                        </a>
                    </div>
                    <div>
                        <a href="/admin/about-us">
                            <button
                                style=" cursor: pointer; border: none; padding: 7px 0px; width: 120px; border-radius:5px; font-size: 16px; font-weight: 700; "
                                class="sidebarHomebButton">
                                About Us
                            </button>
                        </a>
                    </div>
                    <div>
                        <a href="/admin/blogs">
                            <button
                                style=" cursor: pointer; border: none; padding: 7px 0px; width: 120px; border-radius:5px; font-size:16px; font-weight: 700; "
                                class="sidebarHomebButton" for="Blogs">Blogs </button>
                        </a>
                    </div>
                    <div>
                        <a href="/admin/our-testimonial">
                            <button
                                style=" cursor: pointer; border: none; padding: 7px 0px; width: 120px; border-radius:5px; font-size: 16px; font-weight: 700; "
                                class="sidebarHomebButton" for="Testimonial">Testimonial </button>
                        </a>
                    </div>
                    <div>
                        <a href="/admin/contact-us">
                            <button
                                style=" cursor: pointer; border: none; padding: 7px 0px; width: 120px; border-radius:5px; font-size: 16px; font-weight: 700;  "
                                class="sidebarHomebButton" for="contact us">Contact Us </button>
                        </a>
                    </div>
                </div>
            </div>
            <div style="margin-left: 20%; width: 80%;">

                <div
                    style="width:100%; height: 100px; border-width:100%; border-bottom: 1px; border-style: solid; display: flex; gap: 50px;">
                    <a href="/admin/add-home">
                        <button
                            style=" font-weight: 500;  color: white; background-color: #1AAEF4; width: 150px; height: 50px; border-radius: 5px; margin-top: 40px; margin-left: 40px;">Add
                            New Home</button>
                    </a>
                    <a href="/admin/add-partners">
                        <button
                            style="  font-weight: 500; color: white; background-color: #1AAEF4; width: 150px; height: 50px; border-radius: 5px; margin-top: 40px; margin-left: 40px;">
                            Partners Section</button>
                    </a>
                    <a href="/admin/add-categories">
                        <button
                            style="  font-weight: 500; color: white; background-color: #1AAEF4; width: 150px; height: 50px; border-radius: 5px; margin-top: 40px; margin-left: 40px;">
                            Categories Section</button>
                    </a>
                    <a href="/admin/add-ourStats">
                        <button
                            style="  font-weight: 500; color: white; background-color: #1AAEF4; width: 150px; height: 50px; border-radius: 5px; margin-top: 40px; margin-left: 40px;">
                            Our Stats Section</button>
                    </a>
                    <button type="button" onclick="getStudentData()"
                        style="  font-weight: 500; color: white; background-color: #1AAEF4; width: 150px; height: 50px; border-radius: 5px; margin-top: 40px; margin-left: 40px;">
                        Student Data</button>
                </div>

                <div style="margin-left: 100px; margin-top: 60px;">
                    <div style="width: 70%;  display: flex; flex-direction: column; gap: 25px; ">
                        <% if (success && success.length> 0) { %>
                            <div class="toast success-toast">
                                <%= success %>
                            </div>
                            <% } %>
                                <% if (error && error.length> 0) { %>
                                    <div class="toast error-toast">
                                        <%= error %>
                                    </div>
                                    <% } %>
                                        <h1 style=" font-size: 20px; color: green; font-weight: 700;"> Update The Home
                                            Page - </h1>
                                        <form action="/api/v1/admin/update-home" encType="multipart/form-data"
                                            method="POST">
                                            <!-- banner Heading -->
                                            <div style="display: flex;  flex-direction: column;  gap: 10px;">
                                                <label style="font-size: 20px; font-weight: 400; color: #1AAEF4;">Banner
                                                    Heading and
                                                    details: </label>
                                                <textarea class="editor" required type="text" name="bannerHeading"
                                                    placeholder="Banner Heading and welcome paragraph "
                                                    style=" border: 1px; border-style: solid; width: 100%; height: 60px; padding: 10px 10px;"><%= homePage?.bannerHeading  %></textarea>
                                            </div>
                                            <!-- bannerImage -->
                                            <div
                                                style="display: flex;  flex-direction: column;  gap: 10px; margin-top: 20px;">
                                                <label style="font-size: 20px; font-weight: 400; color: #1AAEF4;"
                                                    for="bannerImage">Insert Updated Banner Image : </label>
                                                <div style="display: flex;  width: 100%;">
                                                    <figure style="height: 55px; width: 50px; margin-right: 30px;">
                                                        <img style="height: 100%; width: 100%; object-fit: cover;"
                                                            src="<%= backendUrl %>/<%= homePage?.bannerImage %>"
                                                            alt="banner image" />
                                                    </figure>
                                                    <input type="file" name="bannerImage" id="bannerImage"
                                                        placeholder="Banner Heading"
                                                        style="border: 1px; border-style: solid; width: 100%; height: 60px; padding: 10px 10px;" />
                                                </div>
                                            </div>
                                            <div
                                                style="display: flex;  flex-direction: column;  gap: 10px; margin-top: 20px;">
                                                <label style="font-size: 20px; font-weight: 400; color: #1AAEF4;"
                                                    for="bannerBgImg">Insert Updated Banner Background Image : </label>
                                                <div style="display: flex;  width: 100%;">
                                                    <figure style="height: 55px; width: 50px; margin-right: 30px; ">
                                                        <img style="height: 100%; width: 100%; object-fit: cover;"
                                                            src="<%= backendUrl %>/<%= homePage?.bannerBgImg %>"
                                                            alt="banner image" />
                                                    </figure>
                                                    <input type="file" name="bannerBgImg" id=" bannerBgImg"
                                                        placeholder="Banner Background Image"
                                                        style="border: 1px; border-style: solid; width: 100%; height: 60px; padding: 10px 10px;" />
                                                </div>
                                            </div>
                                            <!-- Choose Course Heading -->
                                            <div
                                                style="display: flex;  flex-direction: column;  gap: 10px; margin-top: 30px;">
                                                <label style="font-size: 20px; font-weight: 400; color: #1AAEF4;">Choose
                                                    Your Course
                                                    Heading and details: </label>
                                                <textarea required type="text" name="chooseCourseHead" class="editor"
                                                    placeholder="Choose Your Course Heading "
                                                    style="border: 1px; border-style: solid; width: 100%; height: 60px; padding: 10px 10px;"><%= homePage?.chooseCourseHead  %> </textarea>
                                            </div>
                                            <!-- Uplift your Career -->
                                            <div
                                                style="display: flex;  flex-direction: column;  gap: 20px; margin-top: 30px;">
                                                <label style="font-size: 20px; font-weight: 400; color: #1AAEF4;">How To
                                                    Uplift Your
                                                    Career Heading and details : </label>
                                                <textarea required type="text" name="upliftYourCareerHead"
                                                    class="editor" placeholder="Uplift Your Career Heading "
                                                    style="border: 1px; border-style: solid; width: 100%; height: 60px; padding: 10px 10px;"> <%= homePage?.upliftYourCareerHead  %></textarea>
                                            </div>

                                            <!-- How To Start -->
                                            <div
                                                style="margin: 30px; border: 2px; border-style: solid;  padding: 15px;">
                                                <div
                                                    style="width: 100%; display: flex; flex-direction: column; justify-content: space-between; align-items: center;">
                                                    <h1
                                                        style="font-size: 20px; font-weight: 700; color: green; margin-top: 20px; margin-left:20px ;">
                                                        Update How To Start : </h1>

                                                    <% homePage?.howToStart?.forEach(function (item,index) {%>
                                                        <div style="width: 100%;">
                                                            <label
                                                                style="font-size: 20px; font-weight: 400; color: #1AAEF4;">How
                                                                To
                                                                Start Heading : </label>
                                                            <input type="text" name="howToStart[<%= index%>][heading]"
                                                                required value="<%= item.heading %>"
                                                                placeholder="Key Heading"
                                                                style="border: 1px; border-style: solid; width: 100%; height: 60px; padding: 10px 10px;" />
                                                            <label
                                                                style="font-size: 20px; font-weight: 400; color: #1AAEF4; margin-top: 20px; display: block;">How
                                                                To Start Details : </label>
                                                            <input type="text" name="howToStart[<%= index %>][details]"
                                                                placeholder="Key Details" value="<%= item.details %>"
                                                                style="border: 1px; border-style: solid; width: 100%; height: 60px; padding: 10px 10px;" />
                                                        </div>
                                                        <%} ) %>
                                                </div>
                                            </div>

                                            <div
                                                style="display: flex;  flex-direction: column;  gap: 10px; margin: 20px; ">
                                                <label style="font-size: 20px; font-weight: 400; color: #1AAEF4;">
                                                    Maximize Your Career Heading and details: </label>
                                                <textarea required type="text" name="maximizeCareerHead"
                                                    placeholder="Maximize Your Career Heading" class="editor"
                                                    style="border: 1px; border-style: solid; width: 100%; height: 60px; padding: 10px 10px;"><%= homePage?.maximizeCareerHead %></textarea>
                                            </div>

                                            <div
                                                style="display: flex;  flex-direction: column;  gap: 10px; margin: 20px; ">
                                                <label style="font-size: 20px; font-weight: 400; color: #1AAEF4;">
                                                    Enter Updated Maximize Your Career Image : </label>
                                                <div style="display: flex;  width: 100%;">
                                                    <figure style="height: 55px; width: 50px; margin-right: 30px;">
                                                        <img style="height: 100%; width: 100%; object-fit: cover;"
                                                            src="<%= backendUrl %>/<%= homePage?.maximizeCareerImg%>"
                                                            alt="banner image" />
                                                    </figure>
                                                    <input type="file" name="maximizeCareerImg"
                                                        placeholder="Maximize Your Career Image "
                                                        style="border: 1px; border-style: solid; width: 100%; height: 60px; padding: 10px 10px;" />
                                                </div>
                                            </div>

                                            <div
                                                style="display: flex;  flex-direction: column;  gap: 10px; margin: 10px; ">
                                                <label style="font-size: 20px; font-weight: 400; color: #1AAEF4;">
                                                    Enter Updated Blog Side Image : </label>
                                                <div style="display: flex;  width: 100%;">
                                                    <figure style="height: 55px; width: 50px; margin-right: 30px;">
                                                        <img style="height: 100%; width: 100%; object-fit: cover;"
                                                            src="<%= backendUrl %>/<%= homePage?.blogImg%>"
                                                            alt="banner image" />
                                                    </figure>
                                                    <input type="file" name="blogImg" placeholder="Select Image "
                                                        style="border: 1px; border-style: solid; width: 100%; height: 60px; padding: 10px 10px;" />
                                                </div>
                                            </div>


                                            <div
                                                style="display: flex;  flex-direction: column;  gap: 10px; margin: 10px; ">
                                                <label style="font-size: 20px; font-weight: 400; color: #1AAEF4;">
                                                    Enter Our Latest Blog Heading and details : </label>
                                                <textarea required type="text" name="blogHead"
                                                    placeholder="Blog Heading " class="editor"
                                                    style="border: 1px; border-style: solid; width: 100%; height: 60px; padding: 10px 10px;"><%= homePage?.blogHead %></textarea>
                                            </div>



                                            <div
                                                style="display: flex;  flex-direction: column;  gap: 10px; margin: 10px; ">
                                                <label style="font-size: 20px; font-weight: 400; color: #1AAEF4;">
                                                    Job Ready Heading and details: </label>
                                                <textarea required type="text" name="jobReadyHead"
                                                    placeholder="Job Ready Heading" class="editor"
                                                    style="border: 1px; border-style: solid; width: 100%; height: 60px; padding: 10px 10px;">
                                    <%= homePage?.jobReadyHead %>
                                    </textarea>
                                            </div>
                                            <div
                                                style="display: flex;  flex-direction: column;  gap: 10px; margin: 10px; ">
                                                <label style="font-size: 20px; font-weight: 400; color: #1AAEF4;">
                                                    Interview Prepration Heading and details: </label>
                                                <textarea required type="text" name="interviewPrepHead" class="editor"
                                                    placeholder="Interview Prepration Heading"
                                                    style="border: 1px; border-style: solid; width: 100%; height: 60px; padding: 10px 10px;">
                                    <%= homePage?.interviewPrepHead %>
                                </textarea>
                                            </div>



                                            <div
                                                style="display: flex;  flex-direction: column;  gap: 10px; margin: 10px; ">
                                                <label style="font-size: 20px; font-weight: 400; color: #1AAEF4;">
                                                    Mentors Heading and details : </label>
                                                <textarea required type="text" name="mentorsHead"
                                                    placeholder="Mentors Heading" class="editor"
                                                    style="border: 1px; border-style: solid; width: 100%; height: 60px; padding: 10px 10px;">
                                    <%= homePage?.mentorsHead %></textarea>
                                            </div>

                                            <div
                                                style="display: flex;  flex-direction: column;  gap: 10px; margin: 10px; ">
                                                <label style="font-size: 20px; font-weight: 400; color: #1AAEF4;">
                                                    Career Counsil Heading and details: </label>
                                                <textarea required type="text" name="careerCounsilHead"
                                                    placeholder="Career Counsil Heading " class="editor"
                                                    style="border: 1px; border-style: solid; width: 100%; height: 60px; padding: 10px 10px;">
                                    <%= homePage?.careerCounsilHead %></textarea>
                                            </div>



                                            <div
                                                style="display: flex;  flex-direction: column;  gap: 10px; margin: 10px; ">
                                                <label style="font-size: 20px; font-weight: 400; color: #1AAEF4;">
                                                    Before College Heading and Details </label>
                                                <textarea required class="editor" type="text" name="beforeCollegeHead"
                                                    placeholder="Before College Heading"
                                                    style="border: 1px; border-style: solid; width: 100%; height: 60px; padding: 10px 10px;"><%= homePage?.beforeCollegeHead %></textarea>
                                            </div>


                                            <div
                                                style="display: flex;  flex-direction: column;  gap: 10px; margin: 10px; ">
                                                <label style="font-size: 20px; font-weight: 400; color: #1AAEF4;">
                                                    Before College Side Image </label>
                                                <div style="display: flex;  width: 100%;">
                                                    <figure style="height: 55px; width: 50px; margin-right: 30px;">
                                                        <img style="height: 100%; width: 100%; object-fit: cover;"
                                                            src="<%= backendUrl %>/<%= homePage?.beforeCollegeImg %>"
                                                            alt="banner image" />
                                                    </figure>
                                                    <input type="file" name="beforeCollegeImg"
                                                        placeholder="Before College Side Image"
                                                        style="border: 1px; border-style: solid; width: 100%; height: 60px; padding: 10px 10px;" />
                                                </div>
                                            </div>

                                            <button type="submit"
                                                style="width: 18%; margin-top: 20px; margin-left: 80%; margin-bottom: 40px;  border: 2px; border-style:solid; border-color:black; font-weight: 500; cursor: pointer; color: white; background-color: #1AAEF4;  height: 40px; text-align: center;  border-radius: 5px; ">
                                                Submit
                                            </button>



                                        </form>


                    </div>
                </div>

                <div></div>

            </div>


        </div>

    </div>
    <script>
        $('.editor').trumbowyg({
            btns: [
                ['viewHTML'],
                ['formatting'],
                ['strong', 'em', 'underline', 'del'],
                ['superscript', 'subscript'],
                ['link'],
                ['insertImage'],
                ['justifyLeft', 'justifyCenter', 'justifyRight', 'justifyFull'],
                ['unorderedList', 'orderedList'],
                ['table'],
                ['foreColor', 'backColor'],
                ['fullscreen']
            ]
        });

        async function getStudentData() {

            console.log("get student data function called");

            try {
                const response = await fetch("/api/v1/admin/student-data");
                if (response.ok) {
                    const blob = await response.blob(); // Convert response to Blob for downloadin
                    console.log("Blob",blob);
                    const link = document.createElement('a');
                    console.log("Link",link);
                    const url = window.URL.createObjectURL(blob);
                    console.log("url",url);
                    link.href = url;
                    link.download = 'studentData.xlsx';
                    
                    link.click();
                    window.URL.revokeObjectURL(url);
                }
                else {
                    throw new Error('Failed to fetch file');
                }
            }
            catch (error) {
                console.log("Error to get the student data", error);
            }

        }


    </script>


</body>

</html>